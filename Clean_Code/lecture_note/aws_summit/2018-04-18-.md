이홍래 테크니컬 트레이너

# 5. RDS, Dynamo DB


NoSQL은 RDB의 대체는 아니다.
기존의 관계형 데이터베이스가 제공하지 않거나, 제공하지만 기능이 미비한 것을 대체한 것이 Not Only SQL이다.
RDB는 풀 테이블 쿼리가 성능이 매우 좋지 않다
ROW지향적이기 때문에..
모든 row를 읽어야 하는 RDB는 느릴 수 밖에
그래서 그에 대한 대안으로 NoSQL이 나왔음

데이터 적재 보다는 그 시점의 데이터를 처리하기 위해 사용된다.

처리할 데이터가 무엇이냐 의 관점으로 DB를 선택해야한다.


### 데이터 스토리지 고려사항
- 데이터 형식
> 비정형 데이터 는 데이터 구조를 갖고 있지 않다?
데이터를 갖고 있지만, 동일한 타입이여도 너무나 다양한 구조를 갖고 있기 때문에 획일화된 파일로 담을 수 없어서
bulk형태의 파일형태로 담아서 수행할 수 있다

- 데이트 크기

퀀시 스트럭트 데이터? 

- 쿼리 빈도
- 데이터 액세스 속도
- 데이터 보존 기간


### AWS 관리형 데이터 베이스
AWS의 데이터베이스 사용시 가장 큰 장점 : 데이터베이스 서버 환경을 만드는데 민감한 모든 시간을 확보할 수 있다
Redshift...데이터 웨어 하우스 : 기업 내 데이터를 중앙 집중적으로 모아 놓는 것 (의사결정을 지원하기 위함)


Amazon RDS(Relational Database Service)
- 비용이 효율적이고 크기 조절 가능한 용량
- 시간 소모적인 데이터베이스 관리 작업을 지원
- Amazon Aurora, MySQL, MariaDB, MS SQL, Oracle 및 PostgreSQL 데이터베이스의 전체 기능에 액세스

효율성
- 간편하고 빠른배포
- 일반적인 데이터베이스 관리 작업을 관리
- 애플리케이션과 호환됨(기존 사용하던 애플리케이션에 호환)
- 빠르고 예상 가능한 성능
- 간편하고 빠른 확장
- 보안
- 비용 효율

DB인스턴스
- DB인스턴스는 Amazon RDS의 기본 빌딩 블록
- DB인스턴스는 클라우드에 있는 격리된 데이터베이스 환경
    > 운영관리에 대한 모든 OS및 DB내부적인 시스템과 격리되어 있음
    
RDS백업 자동 방식
교차 리전 스냅샷
    - 다른 AWS 리전에 저장된 데이터베이스 스냅샷 사본
    - 재해 복구를 위한 백업을 제공
    - 다른 리전으로 마이그레이션 기반으로 사용할 수 있음

애플리케이션 아키텍쳐
(Elastic Load Balancing)로드 밸런서 인스턴스 - EC2 서버 > RDS 데이터베이스 인스턴스 > S3에 저장된 DB 스냅샷(백업본)

모든 서비스 상에 느슨한 형태로 결합하는 것을 권장함
한쪽에 장애 발생시 서로 다른것에 영향을 최소화 하기 위해서..

애플리케이션만 서로 다른 가용영역에 배포할 것이 아니라 RDS역시 다중 AZ RDS 배포를 통해 
다중 AZ작업을 통해 동기식으로 복제될 수 있다.

마스터 데이터베이스에 장애가 발생하면, 대기 데이터베이스로 자동으로 장애 조치가 취해진다.
계획된 유지 관리가 대기 데이터베이스에 먼저 적용

개선된 애플리케이션 아키텍처
이미지 확인



## DynamoDB
- NoSQL
- 어떤 양의 데이터든 제한 없이 저장
- SSD를 사용해 빠르고 예측 가능한 성능
- 테이블별로 필요한 요청 용량을 쉽게 프로비저닝하고 변경
- 완전관리형 NoSQL 데이터베이스 서비스

지원되는 작업
- 쿼리
    - 파티션 키와 정렬키 필터를 사용하여 테이블을 쿼리
    - 테이블에 보조 인덱스가 있는 경우, 보조 인덱스의 키를 사용하여 쿼리
    - 쿼리는 테이블 또는 보조 인덱스에서 항목을 검색하는 가장 효율적인 방법
    
- 스캔


