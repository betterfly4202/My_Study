이홍래 테크니컬 트레이너

# 2. EC2, VPC

EC2
가상화된 서버의 개념
    - 크기 조정 가능한 컴퓨팅 파워
    - 컴퓨팅 리소스 완전제어
    - 새로운 서버 인스턴스 확보 및 부팅 시간을 단축
    
    기존 서버운영 시 소프트웨어를 설치하여 사용해야함
    
    

Amazon EC2 대한 정보
리전과 가용 영역을 선택하여 안정성을 확보할 수 있음
인스턴스가 많아지면 관리를 위해 태그를 사용하여 리소스를 관리할 수 있음


Management Console 통해 EC2 인스턴스 시작
    1. EC2 인스턴스를 시작할 AWS리전을 선택
        리전마다 비용 및 안정성이 다르므로, 자신에게 맞는 리전을 선택해야함
    2. 사전 구성된 Amazon 머신 이미지(AMI)에서 Amazon EC2 인스턴스를 시작
    3. CPU, 메모리, 스토리지 및 네트워크 요구 사항에 따라 인스턴스 유형을 선택
        컴퓨팅 리소스를 선택하여 
    4. 네트워크, IP주소, 보안그룹, 스토리지 볼륨, 태그, 키 페어를 구성
        세부적인 구성 내용
        
        
AMI 세부 정보
- 인스턴스 루트 볼륨 템플릿(예 운영체제,애플리케이션서버,애플리케이션)
    사용자가 운영체제를 설치하지 않아도 됨
- AMI를 사용하여 인스턴스를 시작할 수 있음 AWS계정을 통해


AMI선택 기준
    - 리전
    - 운영체제
    - 아키텍처
    - 시작 권한 
    - 루트 디바이스용 스토리지
    
Amazon EC2 인스턴스

하나 이상의 가용 영역에 각각의 인스턴스를 배포되어 있음
하나의 가용영역에 EBS는 멀티플하게 구성되어있음
사용자의 데이터를 담고 있는 백업할 수 있는 EBS스냅샷이 존재함 >> S3버킷에 저장되어있음


### 인스턴스의 수명주기
AMI시작 > 보류(선택한 인스턴스 유형에 맞는 호스트 선택하는 단계) > 실행 중(서비스를 정상적으로 시작하는 단계)

EBS-backend 인스턴스만 해당
중단 중 () -> 중단됨

중지된 인스턴스는 비용이 발생하지 않음
실행 중인 상태에만 비용이 발생한다


더이상 시작하지 않을 경우 중지 후 종료 시키면 해당 인스턴스가 삭제됨

적합한 EC2 인스턴스 선택
인스턴스를 선택시 고려사항
    - 코어 수
    - 메모리 크기
    - 스토리지 크기 및 유형 등...
    
대용량 메모리 - x1e 인스턴스
    - 최대 4TB의 메모리와 128 vCPU 제공
    
    
일반적으로 [범용] 인스턴스를 사용하는 것이 좋음

인스턴스의 메타 데이터
    - 구성한 인스턴스에 대한 데이터
    - 실행중인 인스턴스를 관리하는 데이터들임
    
    실행중인 인스턴스 내에서 모든 인스턴스 메타데이터 카테고리를 보려면 meta-data/라는 URI를 사욯아면됨
    


EC2 구입 옵션
    - 온 디맨드 인스턴스 : 사용할 기간이 명확하지 않거나, 일정을 추정하기 어려울 때
    - 예약 인스턴스 : 사용기간을 장기적으로 가져가겠다는 요구사항이 있을 경우(장기로하는 만큼 큰 할인)
    - 예정된 인스턴스 : 특정한 기간에만 일정하게 사용할 때
    - 스팟 인스턴스 : 일시적으로 사용하는 배치작업을 돌리고, 그 작업에 대한 결과를 간단히 확인하고 싶을 때 사용
    - 전용 인스턴스 : 해당 호스트 내에서 다른 AWS 계정과 복합적으로 사용할 때 개별적으로 사용하기 위함
    - 전용 호스트 : 가시성에 따라(코어, CPU, 소켓 등) 라이센스에 따라 사용할 때
    
    
    
    
## 네트워킹 Amazon VPC(Virtual Private Cloud)
- 네트워크에 대한 지식이 없어도 디폴트 VPC를 통해 기본적인 가상 네트워크 환경을 구성할 수 있음

VPC 및 서브넷
- 서브넷은 VPC 내 IP주소 범위를 정의함
- 선택한 서브넷에서 AWS리소스를 시작할 수 있음

(외부 게이트웨이로 등록되어 있는지 여부에 따라서) 
    - 프라이빗 서브넷은 인터넷으로 액세스가 가능해서는 안되는 리소스에 사용
    - 퍼블릭 서브넷은 인터넷으로 액세스할 수 있는 리로스에 사용지
    
- 각 서브넷은 하나의 가용 영역 내에 모두 상주해야 하며, 다른 영역으로 확장할 수 없음

(VPC 사용 예 참고하기)

